---
title: "summer_blog_data_viz"
author: "Juliet"
date: "9/22/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)
library(dplyr)
library(janitor)
library(here)
library(wordcloud)
library(RColorBrewer)
library(patchwork)
library(ggwordcloud)

# figure out how to hide the text output and keep the code, ideally allowing the reader to open and close the code in the knitted document through some variation of: include = FALSE, collapse = TRUE, class.source = 'fold-hide', results = 'hide'
```


As Juliet and I reflected on the first quarter of our Master of Environmental Data Science degree, we decided it may be more interesting to show, rather than tell, some of the skills we’ve learned. We also thought it might be fun to share reflections from our whole cohort to truly represent the student experience of this fast-paced, learning-filled summer experience!

As such, we developed a survey (in Google forms) to send to our classmates and gather data about their perspectives on these first six weeks. We considered a few fun data visualizations that might show what MEDS students thought of our first five courses, and the things we’ve been up to outside of class. The following is a description of how we visualize the data submitted by our peers, and some neat graphics describing our MEDS summer, from tidying data to surfing after class. We hope you find it insightful, but also fun :) 


```{r}
data <- read_csv(here("data", "MEDS Summer Reflection Survey (Responses) - Responses Clean.csv"))
```

```{r}
#colnames(data)
data_clean <- data %>% 
  rename("1" =  "Write 3 words to describe or represent week 1 (EDS212 w/ Allison) here:") %>% 
  rename("2_3" =  "Write 3 words to describe or represent weeks 2 & 3 (EDS221 w/ Allison) here:") %>% 
  rename("4" =  "Write 3 words to describe or represent week 4 (EDS214 w/ Julien) here:") %>% 
  rename("5" =  "Write 3 words to describe or represent week 5 (EDS215 w/ Frew) here:") %>% 
  rename("6" =  "Write 3 words to describe or represent week 1 (EDS216 w/ Scott) here:")
```

To visualize how often certain descriptors for each summer course appears, we first needed to separate the three terms submitted for each course into separate observations. We executed this using the `separate_rows()` function. This expanded the terms into three separate observations per student in each class column. 

```{r}
# separate the columns into rows by parsing the 3 words in each observation into 3 different observations
# select certain cols because our first data viz is only using certain cols 
data_clean_1 <- data_clean %>% 
  separate_rows("1") %>% 
  select("Email Address","1")

data_clean_2_3 <- data_clean %>% 
  separate_rows("2_3")%>% 
  select("Email Address","2_3")

data_clean_4 <- data_clean %>% 
  separate_rows("4") %>% 
  select("Email Address","4")

data_clean_5 <- data_clean %>% 
  separate_rows("5") %>% 
  select("Email Address","5")

data_clean_6 <- data_clean %>% 
  separate_rows("6") %>% 
  select("Email Address","6")


```

Then to observe the frequency of words used to describe each course, we used the `table` function to create a table that has two columns, for each word students used and the frequency with which the words occur in that class column. Then, we converted that table to a dataframe. 


```{r}
# use the table() function to take counts of each "factor" (words) and use the data.frame() function to convert these tables to data frames

course_1 <- data.frame(table(data_clean_1$"1"))

course_1_df <- as.data.frame.matrix(course_1)

course_2_3 <- data.frame(table(data_clean_2_3$"2"))

course_2_3_df <- as.data.frame.matrix(course_2_3)

course_4 <- data.frame(table(data_clean_4$"4"))

course_4_df <- as.data.frame.matrix(course_4)

course_5 <- data.frame(table(data_clean_5$"5"))

course_5_df <- as.data.frame.matrix(course_5) %>% 
  filter(!Var1 == "tangent") %>% 
  filter(!Var1 == "tangents") %>% 
  filter(!Var1 == "dry")

course_6 <- data.frame(table(data_clean_6$"6"))

course_6_df <- as.data.frame.matrix(course_6)
```

After this, we wanted to map the frequency of words for each class. We used ggplot to create word clouds which represented the frequency of class descriptors. The word clouds display the descriptive words submitted by our classmates in sizes proportional to the frequency the words were used. The ggplot plot we used is called `ggwordcloud`. We updated the colors by adding an aesthetic feature where each class descriptor is represented by a different color. We also updated the word size so that the cloud was easier to read. 
Since we used ggplot quite a bit in EDS 221, we opted for this method for generating word clouds over another package called `wordcloud,` which is specifically for word clouds. We found that we wanted to showcase our visualization skills by stacking visualizations and adding titles and colors, and it was easier to do this in a ggplot version of word clouds, since we had so much practice with other plots in ggplot.

```{r, include = FALSE}
# make the clouds as separate graphs

#cloud_1 <- wordcloud(course_1_df$Var1, course_1$Freq, min.freq = 1, main = "Week 1 EDS 212:Essential Math in Environmental Data Science ")

#cloud_2 <- wordcloud(course_2_df$Var1, course_2$Freq, min.freq = 1, main = "Week 1 EDS 221")

#could_3_4 <- wordcloud(course_3_4_df$Var1, course_3_4$Freq, min.freq = 1)

#cloud_5 <- wordcloud(course_5_df$Var1, course_5$Freq, min.freq = 1)

#cloud_6 <- wordcloud(course_6_df$Var1, course_6$Freq, min.freq = 1)
```

```{r}
cloud_1 <- ggplot(course_1_df, aes(label = Var1, size = Freq)) +
  geom_text_wordcloud() +
  scale_size_area(max_size = 15) +
  theme(plot.title = element_text(size = 17)) +
  labs(title = "Week 1 EDS 212: Essential Math in Environmental Data Science")

cloud_1

cloud_2_3 <- ggplot(course_2_3_df, aes(label = Var1, size = Freq)) +
  geom_text_wordcloud() +
  scale_size_area(max_size = 15) +
  theme(plot.title = element_text(size = 17)) +
  labs(title = "Weeks 2 & 3 EDS 221: Scientific Programming Essentials")

cloud_2_3

cloud_4 <- ggplot(course_4_df, aes(label = Var1, size = Freq)) +
  geom_text_wordcloud() +
  scale_size_area(max_size = 15) +
  theme(plot.title = element_text(size = 17)) +
  labs(title = "Week 4 EDS 214: Analytical Workflows and Scientific Reproducibility")

cloud_4

cloud_5 <- ggplot(course_5_df, aes(label = Var1, size = Freq)) +
  geom_text_wordcloud() +
  scale_size_area(max_size = 15) +
  theme(plot.title = element_text(size = 17)) +
  labs(title = "Week 5 EDS 215: Introduction to Data Storage and Management")

cloud_5

cloud_6 <- ggplot(course_6_df, aes(label = Var1, size = Freq)) +
  geom_text_wordcloud() +
  scale_size_area(max_size = 15) +
  theme(plot.title = element_text(size = 17)) +
  labs(title = "Week 6 EDS 216: Meta-Analysis and Systematic Reviews")

cloud_6
```



